{% extends 'base.html.twig' %}


{% block body %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="fw-bold mb-0">Mon panier</h1>
    <a href="{{ path('app_produit_index') }}" class="btn btn-outline-secondary rounded-3">Continuer mes achats</a>
  </div>

  {% if items is empty %}
    <div class="alert alert-info">Votre panier est vide.</div>
  {% else %}
    <div class="card border-0 shadow-sm rounded-4">
      <div class="table-responsive">
        <table class="table align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th>Produit</th>
              <th>Prix</th>
              <th class="text-center">Quantité</th>
              <th>Sous-total</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
              <tr>
                <td class="fw-semibold">
                  {{ item.produit.nom }}
                </td>
                <td>{{ item.produit.prix }} €</td>
                <td class="text-center">
                  <div class="d-inline-flex align-items-center gap-2">
                    <a class="btn btn-sm btn-outline-dark"
                       href="{{ path('app_panier_retirer', {'id': item.produit.id}) }}">-</a>
                    <span class="fw-bold">{{ item.quantite }}</span>
                    <a class="btn btn-sm btn-dark"
                       href="{{ path('app_panier_ajouter', {'id': item.produit.id}) }}">+</a>
                  </div>
                </td>
                <td class="fw-bold">{{ item.sousTotal|number_format(2, '.', ' ') }} €</td>
                <td class="text-end">
                  <a class="btn btn-sm btn-outline-danger"
                     href="{{ path('app_panier_supprimer', {'id': item.produit.id}) }}">
                    Supprimer
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <div class="d-flex justify-content-between align-items-center mt-4">
      <a class="btn btn-outline-danger rounded-3" href="{{ path('app_panier_vider') }}">Vider le panier</a>

      <div class="text-end">
        <div class="text-muted">Total</div>
        <div class="fs-4 fw-bold">{{ total|number_format(2, '.', ' ') }} €</div>
        <button class="btn btn-dark rounded-3 mt-2" type="button" disabled>
          Commander (à faire)
        </button>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
